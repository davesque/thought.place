version: '3'

services:
  web:
    build:
      context: .
      args: ['REMOVE_TEXLIVE=false']

    ports: ['$PORT:$PORT']
    env_file: .env

    depends_on: [db]
    volumes: ['.:/usr/src/app']

    stdin_open: true
    tty: true

    command: ['/usr/src/app/entrypoint.sh', '-c', 'debug.ini']

  db:
    image: postgres:latest
